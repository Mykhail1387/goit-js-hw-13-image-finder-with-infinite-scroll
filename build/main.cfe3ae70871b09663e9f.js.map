{"version":3,"sources":["webpack:///./templates/infinityImage.hbs","webpack:///./js/infinite-scroll.js"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","webformatURL","call","largeImageURL","likes","views","comments","downloads","PNotify","defaults","delay","refs","searchForm","document","querySelector","galleryItems","body","inputValue","addEventListener","e","preventDefault","innerHTML","infScrollInstance","pageIndex","input","currentTarget","elements","query","value","error","text","loadNextPage","InfiniteScroll","responseType","history","path","this","on","response","marcup","JSON","parse","hits","map","post","imageListItemsTemplateNotEach","join","proxyEl","createElement","childItems","querySelectorAll","appendItems","length","success","target","nodeName","imageBig","getAttribute","basicLightbox","show"],"mappings":"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","file":"main.cfe3ae70871b09663e9f.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<li class=\\\"listImages\\\">\\r\\n    <div class=\\\"photo-card\\\">\\r\\n        <img class=\\\"img\\\" src=\\\"\"\n    + alias4(((helper = (helper = helpers.webformatURL || (depth0 != null ? depth0.webformatURL : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":30},\"end\":{\"line\":3,\"column\":46}}}) : helper)))\n    + \"\\\" data-source=\\\"\"\n    + alias4(((helper = (helper = helpers.largeImageURL || (depth0 != null ? depth0.largeImageURL : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":61},\"end\":{\"line\":3,\"column\":78}}}) : helper)))\n    + \"\\\" alt=\\\"\\\" />\\r\\n\\r\\n        <div class=\\\"stats\\\">\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n                \"\n    + alias4(((helper = (helper = helpers.likes || (depth0 != null ? depth0.likes : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":16},\"end\":{\"line\":8,\"column\":25}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">visibility</i>\\r\\n                \"\n    + alias4(((helper = (helper = helpers.views || (depth0 != null ? depth0.views : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":12,\"column\":16},\"end\":{\"line\":12,\"column\":25}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">comment</i>\\r\\n                \"\n    + alias4(((helper = (helper = helpers.comments || (depth0 != null ? depth0.comments : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":16,\"column\":16},\"end\":{\"line\":16,\"column\":28}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n                \"\n    + alias4(((helper = (helper = helpers.downloads || (depth0 != null ? depth0.downloads : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":20,\"column\":16},\"end\":{\"line\":20,\"column\":29}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n        </div>\\r\\n    </div>\\r\\n</li>\";\n},\"useData\":true});","'use strict';\r\nimport imageListItemsTemplateNotEach from '../templates/infinityImage.hbs';\r\nimport InfiniteScroll from 'infinite-scroll';\r\nimport 'material-design-icons/iconfont/material-icons.css';\r\nimport * as basicLightbox from 'basiclightbox';\r\nimport 'basiclightbox/src/styles/main.scss';\r\n\r\nimport PNotify from 'pnotify/dist/es/PNotify.js';\r\nimport 'pnotify/dist/PNotifyBrightTheme.css';\r\nPNotify.defaults.delay = 3000;\r\n\r\nconst refs = {\r\n    searchForm: document.querySelector('#search-form'),\r\n    galleryItems: document.querySelector('#gallery'),\r\n    body: document.querySelector('body'),\r\n}\r\n\r\nlet inputValue = '';\r\n\r\nrefs.searchForm.addEventListener('submit', searchFormSubmit);\r\n\r\nfunction searchFormSubmit(e) {\r\n    e.preventDefault();\r\n    clearImageItems();\r\n    infScrollInstance.pageIndex = 1;\r\n\r\n    const form = e.currentTarget;\r\n    const input = form.elements.query;\r\n    inputValue = input.value;\r\n    if (inputValue === '') {\r\n        PNotify.error({\r\n            text: 'Нужно ввести запрос!',\r\n        });\r\n    } else {\r\n        infScrollInstance.loadNextPage();\r\n    }\r\n}\r\n\r\nconst infScrollInstance = new InfiniteScroll(refs.galleryItems, {\r\n    responseType: 'text',\r\n    history: false,\r\n    path() {\r\n        return `https://cors-anywhere.herokuapp.com/https://pixabay.com/api/?image_type=photo&orientation=horizontal&q=${inputValue}&page=${this.pageIndex}&per_page=12&key=15216450-d096caa7dd5d740f777344039`\r\n    }\r\n});\r\n\r\ninfScrollInstance.on('load', response => {\r\n    const posts = JSON.parse(response);\r\n    const hitsPosts = posts.hits;\r\n    const marcup = hitsPosts.map(post => imageListItemsTemplateNotEach(post)).join('');\r\n    const proxyEl = document.createElement('div');\r\n    proxyEl.innerHTML = marcup;\r\n\r\n    const childItems = proxyEl.querySelectorAll('.photo-card');\r\n    infScrollInstance.appendItems(childItems);\r\n    if (childItems.length >= 12) {\r\n        PNotify.success({\r\n            text: \"Подгрузились изображения!\"\r\n        });\r\n    }\r\n    else if (childItems.length === 0) {\r\n        PNotify.error({\r\n            text: 'Изображений нет!',\r\n        });\r\n    } else if (childItems.length <= 12) {\r\n        PNotify.error({\r\n            text: 'Изображения заканчиваются их очень мало!',\r\n        });\r\n    }\r\n})\r\n\r\nfunction clearImageItems() {\r\n    refs.galleryItems.innerHTML = '';\r\n}\r\n\r\n//===========================================работа basicLightbox плагина===\r\nrefs.body.addEventListener('click', showBigImage);\r\n\r\nfunction showBigImage(e) {\r\n    if (e.target.nodeName === 'IMG') {\r\n        const imageBig = e.target.getAttribute('data-source');\r\n        basicLightbox.create(`\r\n        <img src=\"${imageBig}\">\r\n    `).show()\r\n    }\r\n}"],"sourceRoot":""}